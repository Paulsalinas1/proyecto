{% extends "vet\base_admin.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block stilos %} {% endblock stilos %}
{% block title %} admin usuarios {% endblock title %}
{% block contenido %}


<a class="btn btn-primary" data-bs-toggle="offcanvas" href="#canvas_filtro" role="button" aria-controls="canvas_filtro">
  filtro
</a>
<h2 class="text-center">Lista de Usuarios</h2>
<ul>
  <table class="table table-striped">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Correo</th>
            <th>Estado</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for usuario in usuarios %}
            <tr>
                <td>{{ usuario.nombre }}</td>
                <td>{{ usuario.apellido }}</td>
                <td>{{ usuario.correo }}</td>
                <td>
                    {% if usuario.is_staff %} Empleado {% endif %}
                    {% if usuario.is_superuser %} Superuser {% endif %}
                    {% if usuario.es_baneado %} Baneado {% else %} Normal {% endif %}
                </td>
                
                    <!-- Añade tus botones de acción aquí -->
                    {% if usuario.es_baneado%}
                    <td class="col-md-2"> <a class="btn btn-success" data-bs-toggle="offcanvas"
                      href="#canvas_Desbloquear" role="button" aria-controls="canvas_Desbloquear">
                      Desbloquear
                    </a></td>
                    {% else %}
                    <td class="col-md-2"> <a class="btn btn-success" data-bs-toggle="offcanvas" href="#canvas_Bloquear"
                      role="button" aria-controls="canvas_Bloquear">
                      Bloquear
                    </a></td>
                    {% endif %}
            </tr>
        {% empty %}
            <tr>
                <td colspan="5">No hay usuarios disponibles.</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
</ul>
<!--Función para ver el filtro usuario-->
<div class="offcanvas offcanvas-start" tabindex="-1" id="canvas_filtro" aria-labelledby="canvas_filtro">
  <div class="offcanvas-header">
    <h4 class="offcanvas-title" id="canvas_filtroLabel">puede filtrar por </h4>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div>
      <form method="get">
        {{ form | crispy }}
        <button class="btn btn-primary" type="submit">Filtrar</button>
      </form>
    </div>
  </div>
</div>
<!--Función para bloquear usuario-->
<div class="offcanvas offcanvas-start" tabindex="-1" id="canvas_Bloquear" aria-labelledby="canvas_Bloquear">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="canvas_BloquearLabel">Bloqueo</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <form class="row needs-validation" action="../html/usuarios_admin.html" method="get" novalidate>  
      <div class="mb-3">
        <label for="exampleFormControlTextarea" class="form-label">Decripción del motivo del bloqueo</label>
        <textarea class="form-control" id="exampleFormControlTextarea" rows="3" required></textarea>
        <div class="valid-feedback">descripcion valida</div>
        <div class="invalid-feedback">descripcion invalida</div>
      </div>
      <td class="col-md-2"><button type="submit" class="boton bg-success"> Bloquear</button></td>
    </form>
  </div>
</div>

<!--Función para desbloquear usuario-->
<div class="offcanvas offcanvas-start" tabindex="-1" id="canvas_Desbloquear" aria-labelledby="canvas_Desbloquear">
<div class="offcanvas-header">
  <h5 class="offcanvas-title" id="canvas_DesbloquearLabel">Desbloqueo</h5>
  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
</div>
<div class="offcanvas-body">
  <form class="row needs-validation" action="../html/usuarios_admin.html" method="get" novalidate>  
    <div class="mb-3">
      <label for="exampleFormControlTextarea2" class="form-label">Decripción del motivo del Desbloqueo</label>
      <textarea class="form-control" id="exampleFormControlTextarea2" rows="3" required></textarea>
      <div class="valid-feedback">descripcion valida</div>
      <div class="invalid-feedback">descripcion invalida</div>
    </div>
    <td class="col-md-2"><button type="submit" class="boton bg-success"> Desbloquear</button></td>
  </form>
</div>
</div>

{% endblock contenido %}
{% block script %}
<script src="{% static 'vet/js/usuario_adm_js.js'%}"></script>
{% endblock script %}   



      
  